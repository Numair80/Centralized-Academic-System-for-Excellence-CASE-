// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Staff {
  staff_id        Int     @id @default(autoincrement())
  first_name      String  @db.VarChar(50)
  last_name       String  @db.VarChar(50)
  username        String  @unique @db.VarChar(50)
  password_hash   String?
  email           String  @db.VarChar(100)
  contact_number  String? @db.VarChar(15)
  department      String? @db.VarChar(50)
  block_number    String? @db.VarChar(50)
  room_number     String? @db.VarChar(10)
  role            String? @db.VarChar(50)
  profile_picture String?
  availability    String? @default("Available") @db.VarChar(20)
  created_at      DateTime @default(now())
  updated_at      DateTime @updatedAt

  @@map("staff")
}

model Student {
  student_id     BigInt  @id
  first_name     String  @db.VarChar(50)
  last_name      String  @db.VarChar(50)
  email_id       String  @unique @db.VarChar(50)
  password_hash  String?
  contact_number String  @db.VarChar(50)
  department     String? @db.VarChar(50)
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  // Relation to parent
  parents        Parent[]

  @@map("student")
}

model Parent {
  parent_id      Int     @id @default(autoincrement())
  first_name     String? @db.VarChar(50)
  last_name      String? @db.VarChar(50)
  username       String  @unique @db.VarChar(50)
  password_hash  String?
  child_email    String? @db.VarChar(50)
  contact_number String? @db.VarChar(50)
  created_at     DateTime @default(now())
  updated_at     DateTime @updatedAt

  // Relation to student
  student        Student? @relation(fields: [child_email], references: [email_id])

  @@map("parent")
}
